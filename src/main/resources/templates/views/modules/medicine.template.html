<div data-ng-controller="MedicineController as medicine">
	<div class="pure-g">
		<div class="pure-u-1 pure-u-md-1-2">
			<div class="section">
				<h2>What medicines are you taking?</h2>
				<div class="pure-form pure-form-aligned">
					<fieldset>
						<div class="pure-control-group" data-ng-repeat="medication in medicine.medications">
							<label for="medicine{{$index + 1}}">Medication {{$index + 1}}:</label>
							<input class="inline-block" id="medicine{{$index + 1}}" type="text" data-ng-model="medication.input"/>
							<a href="" data-ng-if="$index != 0" 							
								data-ng-click="medicine.removeMedication($index)" title="Remove medication {{$index + 1}}" 
								class="link-button button-remove fa fa-times"></a>
						</div>
						<a href="" data-ng-click="medicine.addMedication()">Add another medication</a>
						<div class="pure-u-1">
							<hr />
							<button data-ng-click="medicine.search()" class="pure-button pure-button-primary">Search</button>
						</div>
					</fieldset>
				</div>
				<div data-ng-if="medicine.adverseEventMetadata" >
					<div class="list-container">
						<div class="pure-g list">
							<div class="pure-u-1 listheader" role="listitem">
								Adverse events reported in the last year - {{medicine.adverseEvents.length}} results
							</div>
						</div>
					</div>
					<div class="list-container scrollable">
						<div class="pure-g list" role="list">
							<div class="pure-u-1" role="listitem" data-ng-repeat="event in medicine.adverseEvents">
								<div class="pure-g listitem">
									<div class="pure-u-3-4">
										<a class="inline-block short-description" href="" 
											data-ng-click="event." 
											data-ng-bind="$index + 1 + ') ' + event.mostDangerousEffect">
										</a> <br />
									</div>
									<div class="pure-u-1-4 metadata">
										{{event.receiveDateIso | date: "mediumDate"}}
									</div>
									<div class="pure-u-1">
										<div class="description">
											{{event.patient.patientsexString}} patient taking {{event.patient.drug.length}} different medications
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>				
			</div>
		</div>
		<div class="pure-u-1 pure-u-md-1-2">
			<div id="resultsSection"></div>
		</div>
	</div>
</div>